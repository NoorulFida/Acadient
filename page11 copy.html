<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TimeTrack | Student Dashboard</title>
 <link rel="stylesheet" href="styles/style11.css">
    <script type="module" src="./homepage.js"></script>
    <script type="module" src="./StudentDashboard.js"></script>


</head>

<body>

<header class="top-bar">
  <h1>Student Dashboard</h1>
  <div class="icons">
    <a href="page12.html">ğŸ‘¤</a>
    <span onclick="openAssignments()">ğŸ“‹</span>
    <button id="logout" >Log out</button>
  </div>
</header>

<main class="container">
  <div class="card">
    <div class="row">
      <span class="label">ğŸ“… Date</span>
      <span id="date"></span>
    </div>

    <div class="row">
      <span class="label">ğŸ“ Department</span>
      <span id="dept"></span>
    </div>

    <div class="row">
      <span class="label">ğŸ“˜ Semester</span>
      <span id="sem"></span>
    </div>

    <div class="row assignment">
      <span class="label">ğŸ“ Assignment</span>
      <span id="assignmentText"></span>
    </div>
  </div>
</main>

<!-- ASSIGNMENT MODAL -->
<div class="modal" id="assignmentsModal">
  <div class="modal-content">
    <div class="modal-header">
      <h3>Assignments</h3>
      <span onclick="closeAssignments()">&times;</span>
    </div>
    <div class="modal-body" id="assignmentList"></div>
  </div>
</div>

<script>


/* ======== LOAD DASHBOARD ======== */
function loadDashboard() {
  const stdreg = JSON.parse(localStorage.getItem("stdreg"));
  const assignments = JSON.parse(localStorage.getItem("assignments"));

  const deptSpan = document.getElementById("dept");
  const semSpan = document.getElementById("sem");
  const assignmentText = document.getElementById("assignmentText");
  const assignmentList = document.getElementById("assignmentList");

  if (!stdreg) {
    assignmentText.textContent = "Student not registered";
    return;
  }

  deptSpan.textContent = stdreg.department;
  semSpan.textContent = "Semester " + stdreg.semester;

  assignmentList.innerHTML = "";
  assignmentText.textContent = "No assignments";

  const semStr = String(stdreg.semester);

  if (
    assignments &&
    assignments[stdreg.department] &&
    assignments[stdreg.department][semStr]
  ) {
    const list = assignments[stdreg.department][semStr];

    if (list.length > 0) {
      assignmentText.textContent = list[0];

      list.forEach((item, index) => {
        assignmentList.innerHTML += `
          <div class="assignment-item">
            <strong>Assignment ${index + 1}</strong>
            <p>${item}</p>
          </div>
        `;
      });
    }
  } else {
    assignmentList.innerHTML = `<div class="empty-state">No assignments found</div>`;
  }
}

/* ======== MODALS ======== */
function openAssignments() {
  document.getElementById("assignmentsModal").classList.add("active");
}

function closeAssignments() {
  document.getElementById("assignmentsModal").classList.remove("active");
}

window.onclick = function(e) {
  if (e.target.classList.contains("modal")) {
    e.target.classList.remove("active");
  }
};

/* ======== INIT ======== */
document.getElementById("date").textContent = new Date().toDateString();
loadDashboard();
</script>

</body>
</html>