<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TimeTrack | Teacher Dashboard</title>
    <link rel="stylesheet" href="styles/style4.css">


</head>

<body>

    <!-- ---------- SIDEBAR ---------- -->
    <div class="sidebar">
        <div class="logo-icon">ğŸ“…</div>
        <div class="icon active" data-section="home">ğŸ </div>
        <div class="icon" data-section="notifications">ğŸ””</div>
        <div class="icon" data-section="reports">ğŸ“‹</div>
        <div class="icon" data-section="timetable">ğŸ“…</div>

    </div>

    <!-- ---------- CONTENT ---------- -->
    <div class="content">

        <!-- HOME -->
        <div id="home" class="section active">
            <h2>Available Hours</h2>

            <div class="circle-container">
                <div class="circle">1</div>
                <div class="circle">2</div>
                <div class="circle">3</div>
                <div class="circle">4</div>
                <div class="circle">5</div>
            </div>

            <div class="box">
                <label>Academic Updates</label>
                <select onchange="goToPage(this.value)">
                    <option value="">Select an option</option>
                    <option value="assignment">Assignment</option>
                    <option value="seminar">Seminar</option>
                    <option value="exam">Exam</option>
                </select>
            </div>
        </div>

        <!-- NOTIFICATIONS -->
        <div id="notifications" class="section">
            <h2>Notifications</h2>

            <div class="box">
                <div class="notification-item">
                    <p>ğŸ“ Assignment submission tomorrow</p>
                </div>
                <div class="notification-item">
                    <p>ğŸ¤ Seminar scheduled on Friday</p>
                </div>
                <div class="notification-item">
                    <p>ğŸ“Š Exam timetable released</p>
                </div>
            </div>
        </div>

        <!-- REPORTS -->
        <div id="reports" class="section">
            <h2>Reports</h2>

            <div class="box">
                <div class="report-item">
                    <p>ğŸ“Š Attendance Report</p>
                </div>
                <div class="report-item">
                    <p>ğŸ“ˆ Student Performance</p>
                </div>
                <div class="report-item">
                    <p>ğŸ“‰ Exam Analysis</p>
                </div>
            </div>
        </div>

        <div id="timetable" class="section">
            <h2>Timetable</h2>

            <div class="box">
                <button onclick="location.href='create-timetable.html'">
                    â• Create / Edit Timetable
                </button>
            </div>
        </div>


    </div>

    <!-- ---------- SCRIPT ---------- -->
    <script>


        const icons = document.querySelectorAll(".icon");
        const sections = document.querySelectorAll(".section");
        // Sidebar section switch
        icons.forEach(icon => {
            icon.addEventListener("click", () => {
                icons.forEach(i => i.classList.remove("active"));
                icon.classList.add("active");

                sections.forEach(sec => sec.classList.remove("active"));
                document.getElementById(icon.dataset.section).classList.add("active");
            });
        });
        /* ---------- LOAD AVAILABLE HOURS ---------- */
        function loadHours() {
            fetch("http://localhost:3000/api/teachers/hours", {
                headers: {
                    Authorization: "Bearer " + token
                }
            })
                .then(res => res.json())
                .then(data => {
                    const container = document.querySelector(".circle-container");
                    container.innerHTML = "";

                    data.hours.forEach(hour => {
                        const div = document.createElement("div");
                        div.className = "circle";
                        div.innerText = hour;
                        container.appendChild(div);
                    });
                })
                .catch(err => {
                    console.error(err);
                    alert("Failed to load hours");
                });
        }
        /* ---------- LOAD NOTIFICATIONS ---------- */
        function loadNotifications() {
            fetch("http://localhost:3000/api/notifications", {
                headers: {
                    Authorization: "Bearer " + token
                }
            })
                .then(res => res.json())
                .then(data => {
                    const box = document.querySelector("#notifications .box");
                    box.innerHTML = "";

                    data.forEach(note => {
                        const div = document.createElement("div");
                        div.className = "notification-item";
                        div.innerHTML = `<p>ğŸ”” ${note.message}</p>`;
                        box.appendChild(div);
                    });
                })
                .catch(err => {
                    console.error(err);
                    alert("Failed to load notifications");
                });
        }




        // Dropdown redirect
        function goToPage(value) {
            if (value === "assignment") {
                window.location.href = "page5.html";
            } else if (value === "seminar") {
                window.location.href = "page6.html";
            } else if (value === "exam") {
                window.location.href = "page7.html";
            }
        }
        // Load data on page load
        loadHours();
        loadNotifications();

    </script>

</body>

</html>