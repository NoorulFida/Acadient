<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TimeTrack | Timetable</title>
   <link rel="stylesheet" href="styles/style9.css">

</head>
<body>
  <div class="header">
    <button class="arrow" onclick="location.href='page2.html'">‚Üê Back</button>
  </div>

  <div class="container">
    <div class="page-header">
      <div class="logo-icon">üìÖ</div>
      <h2 id="title">Timetable</h2>
      <p class="subtitle" id="subtitle">View your weekly schedule</p>
    </div>

    <div class="timetable" id="timetable"></div>
  </div>

  <script>
    /* ================= FULL TIMETABLE JSON ================= */
    const timetableData = {
      "Bsc Computer Science": {
        "3": {
          "Monday": [
            "Mathematics",
            "Data Structures",
            "Operating Systems",
            "DBMS",
            "Programming Lab"
          ],
          "Tuesday": [
            "Operating Systems",
            "Mathematics",
            "DBMS",
            "Data Structures",
            "Library"
          ],
          "Wednesday": [
            "Data Structures",
            "Operating Systems",
            "Mathematics",
            "DBMS",
            "Programming Lab"
          ],
          "Thursday": [
            "DBMS",
            "Data Structures",
            "Operating Systems",
            "Mathematics",
            "Sports"
          ],
          "Friday": [
            "Programming Lab",
            "Mathematics",
            "Data Structures",
            "Operating Systems",
            "DBMS"
          ]
        }
      }
    };

    /* ================= READ USER DATA ================= */
    const userData = JSON.parse(sessionStorage.getItem("data"));
    const timetableDiv = document.getElementById("timetable");
    const heading = document.getElementById("title");
    const subtitle = document.getElementById("subtitle");

    if (!userData) {
      timetableDiv.innerHTML = '<div class="no-data" colspan="4">üìã No data found. Please go back and select your preferences.</div>';
    } else {
      const { department, semester, day } = userData;
      const timetable = timetableData[department]?.[semester];
      heading.textContent = `${department}`;
      subtitle.textContent = `Semester ${semester} Schedule`;

      if (!timetable) {
        timetableDiv.innerHTML = '<div class="no-data">üìã Timetable not available for the selected options.</div>';
      } else {
        const daysToShow = day === "All" ? Object.keys(timetable) : [day];

        let html = `
          <div></div>
          <div class="timetable-cell header-cell">Hour 1</div>
          <div class="timetable-cell header-cell">Hour 2</div>
          <div class="timetable-cell header-cell">Hour 3</div>
          <div class="timetable-cell header-cell">Hour 4</div>
          <div class="timetable-cell header-cell">Hour 5</div>
        `;

        daysToShow.forEach(d => {
          html += `<div class="timetable-cell day-cell">${d}</div>`;
          timetable[d].forEach(subject => {
            html += `<div class="timetable-cell subject-cell">${subject}</div>`;
          });
        });

        timetableDiv.innerHTML = html;
      }
    }
  </script>
</body>
</html>